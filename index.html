<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sphere Program</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="dat-gui-container"></div>
    <div id="html-controls" class="controls hidden">
        <div class="panel-header">
            <h3>HTML Controls</h3>
            <button id="toggle-to-dat-gui">Use dat.GUI</button>
        </div>
        <fieldset>
            <legend>Global Settings</legend>
            <div class="control-row">
                <label>Background</label>
                <input type="color" id="bg-color" value="#000000">
            </div>
            <div class="control-row">
                <label>Rotate Earth</label>
                <input type="checkbox" id="rotate-sphere" checked>
            </div>
            <div class="control-row">
                <label>Preserve Anchor</label>
                <input type="checkbox" id="preserve-target">
            </div>
            <div class="control-row">
                <button id="reset-camera-btn" class="full-width">Reset Camera</button>
            </div>
        </fieldset>
        <fieldset>
            <legend>Caps</legend>
            <div class="control-row">
                <button id="add-cap-btn" class="full-width">Add New Cap</button>
            </div>
            <div class="control-row">
                <label>File Interface</label>
                <div>
                    <button id="save-caps-btn">Save Caps</button>
                    <input type="file" id="load-caps-input" accept=".json">
                </div>
            </div>
            <div id="caps-container"></div>
        </fieldset>
        <fieldset>
            <legend>City Key</legend>
            <div id="city-key" class="control-row-stacked"></div>
        </fieldset>
    </div>

    <template id="cap-template">
        <div class="cap-controls">
            <h3 class="cap-title"></h3>
            <div class="control-grid">
                <div class="control-row">
                    <label>X: <span class="value-display"></span></label>
                    <input type="range" data-property="x">
                </div>
                <div class="control-row">
                    <label>Y: <span class="value-display"></span></label>
                    <input type="range" data-property="y">
                </div>
                <div class="control-row">
                    <label>Height: <span class="value-display"></span></label>
                    <input type="range" data-property="h">
                </div>
                <div class="control-row">
                    <label>Size: <span class="value-display"></span></label>
                    <input type="range" data-property="size">
                </div>
                <div class="control-row">
                    <label>X Scaler</label>
                    <select data-property="xScaler"></select>
                </div>
                <div class="control-row">
                    <label>Y Scaler</label>
                    <select data-property="yScaler"></select>
                </div>
                <div class="control-row">
                    <label>Height Scaler</label>
                    <select data-property="hScaler"></select>
                </div>
                <div class="control-row">
                    <label>Size Scaler</label>
                    <select data-property="sizeScaler"></select>
                </div>
                <div class="control-row">
                    <label>Direction</label>
                    <select data-property="direction"></select>
                </div>
            </div>
            <button class="remove-cap-btn full-width">Remove Cap</button>
        </div>
    </template>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.156.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.156.0/examples/jsm/"
            }
        }
    </script>
    <script type="module" src="main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js"></script>
</body>
</html>